<html>

<head>
  <link rel="stylesheet" href="src/css/style.css">
  <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
  <script type='text/javascript'>
    function addFields() {
      // Number of inputs to create
      var number = document.getElementById("member").value;
      // Container <div> where dynamic content will be placed
      var container = document.getElementById("container");
      // Clear previous contents of the container
      while (container.hasChildNodes()) {
        container.removeChild(container.lastChild);
      }
      for (i = 0; i < number; i++) {
        // Append a node with a random text
        container.appendChild(document.createTextNode("Member " + (i + 1)));
        // Create an <input> element, set its type and name attributes
        var input = document.createElement("input");
        input.type = "text";
        input.name = "member" + i;
        container.appendChild(input);
        // Append a line break 
        container.appendChild(document.createElement("br"));
      }
    }

  </script>
</head>

<body>
  <header class="header">
    <div class="container header__container" id="header__container">
      <img src="assets/images/logo.png" alt="Da Vinci Logo" id="logo" class="header__logo" />
      <div class="header__by">
        <h3>Prueba presentada por:</h3>
        <p>Johan Vargas Sánchez</p>
        <a href="https://github.com/johanjaguar" class="header__github github"><i class="fab fa-github"></i>johanjaguar</a>
      </div>
    </div>
  </header>
  <section class="middle">
    <div class="container middle__container" id="middle__container">
      <form>
        <div class="middle__row row">
          <input type="text" id="primer-nombre" name="primer-nombre" placeholder="Primer Nombre" />
          <input type="text" id="segundo-nombre" name="segundo-ombre" placeholder="Segundo Nombre" />
          <input type="text" id="primer-apellido" name="primer-apellido" placeholder="Primer Apellido" />
          <input type="text" id="segundo-apellido" name="segundo-apellido" placeholder="Segundo Apellido" />
        </div>
        <div class="middle__row row">
          <a id="add-tag" href="#"><i class="fas fa-tags"></i>Agregar Etiqueta</a>
        </div>

        <div id="tags" class="middle__row row">

        </div>

        <div class="middle__row row">
          <a href="#" id="send-values"><i class="fas fa-search"></i>Buscar</a>
        </div>

      </form>
    </div>
  </section>

  <footer class="footer">
    <div class="footer__container container">
      <p>Bogotá, Marzo 01 de 2018 </p>
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function() {

      var countTags = 0;
      var addTag = document.getElementById('add-tag');
      var tagsBox = document.getElementById('tags');
      addTag.addEventListener('click', () => {
        this.preventDefault;
        var tagInput = document.createElement("input");
        tagInput.setAttribute("type", "text");
        tagInput.id = "tag-" + countTags;
        tagInput.name = "tag-" + countTags;
        tagInput.setAttribute('placeholder', "Inserte la palabra clave");
        tagInput.className = "tag";
        tagsBox.appendChild(tagInput);
        countTags++;
      });

      var sendLink = document.getElementById('send-values');
      sendLink.addEventListener('click', () => {
        this.preventDefault;

        var primerNombre = document.getElementById('primer-nombre').value;
        var segundoNombre = document.getElementById('segundo-nombre').value;
        var primerApellido = document.getElementById('primer-apellido').value;
        var segundoApellido = document.getElementById('segundo-apellido').value;

        var fullName = `${primerNombre} ${segundoNombre} ${primerApellido} ${segundoApellido}`;

        var query = `search=${fullName}`;
        var tagsArray = document.getElementsByClassName('tag');
        Object.keys(tagsArray).forEach(function(key) {
          query = query + "+" + tagsArray[key].value;
        });

        location.href = `results.html?${query}`;

      });

    });

  </script>
  <style>


  </style>
</body>

</html>
